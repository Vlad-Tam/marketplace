<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User</title>
</head>
<body>
    <h1>User information:</h1>
    <h4>
        <span th:text="'ID: ' + ${user.getId()} + ', '"></span><br>
        <span th:text="'Name: ' + ${user.getBasicInfo().getName()} + ', '"></span><br>
        <span th:text="'Surname: ' + ${user.getBasicInfo().getSurname()} + ', '"></span><br>
        <span th:text="'Phone number: ' + ${user.getBasicInfo().getPhoneNumber()} + ', '"></span><br>
        <span th:text="'Email: ' + ${user.getBasicInfo().getEmail()} + ', '"></span><br>
        <span th:text="'Password: ' + ${user.getBasicInfo().getPassword()} + ', '"></span><br>
        <span th:text="'Registration date: ' + ${user.getRegistrationDate()} + ', '"></span><br>
        <span th:text="'Address: ' + ${user.getAddress().getCity().getRegion()} + ' region, city: ' + ${user.getAddress().getCity().getName()} + ', street: ' + ${user.getAddress().getStreet()} + ', ' + ${user.getAddress().getHouseNumber()} + '-' + ${user.getAddress().getFlatNumber()}"></span><br>
    </h4>
    <h3>Products on sale:</h3>
    <ul>
        <li th:each="product : ${user.getSalesList()}">
            <span th:text="'    ' + ${product.getBasicInfo().getName()} + ', price: ' + ${product.getBasicInfo().getPrice()} + '$'"></span><br>
        </li>
    </ul>
    <h3>Wishes:</h3>
    <ul>
        <li th:each="wish : ${user.getWishList()}" style="display: flex; align-items: center;">
            <a th:href="@{'/advertisements/' + ${wish.getId()}}" th:text="'    ' + ${wish.getBasicInfo().getName()} + ', price: ' + ${wish.getBasicInfo().getPrice()} + '$'" style="margin-right: 10px;"></a>
            <form action="/wishes/deleting" method="post" style="margin-bottom: 0;">
                <input type="hidden" name="userId" th:value="${user.getId()}" />
                <input type="hidden" name="advertisementId" th:value="${wish.getId()}" />
                <input type="hidden" name="originalPage" th:value="'/users/' + ${user.getId()}" />
                <button type="submit">Delete</button>
            </form>
        </li>
    </ul>
    <form action="/wishes/new" method="post">
        <input type="hidden" name="userId" th:value="${user.getId()}" />
        <input type="hidden" name="originalPage" th:value="'/users/' + ${user.getId()}" />
        <input type="submit" value="Add new wish" />
    </form>
    <h3>Received comments:</h3>
    <ul>
        <li th:each="recievedComment : ${user.getReceivedCommentsList()}">
            <span th:text="'    From: ' + ${recievedComment.getSender().getBasicInfo().getSurname()} + ' ' + ${recievedComment.getSender().getBasicInfo().getName()} + ', rate: ' + ${recievedComment.getRating()}"></span><br>
        </li>
    </ul>
    <h3>Sent comments:</h3>
    <ul>
        <li th:each="sentComment : ${user.getSentCommentsList()}">
            <span th:text="'    To: ' + ${sentComment.getReceiver().getBasicInfo().getSurname()} + ' ' + ${sentComment.getReceiver().getBasicInfo().getName()} + ', rate: ' + ${sentComment.getRating()}"></span><br>
        </li>
    </ul>
    <h3>
        <form th:action="@{${user.getId()} + '/deleting'}" method="post">
            <button type="submit">Delete this user</button>
        </form>
        <a href="../users">Return to users list</a>
    </h3>
</body>
</html>